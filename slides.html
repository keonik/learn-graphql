<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

    <title>GraphQL</title>
    <link rel="stylesheet" href="./css/reveal.css" />
    <link rel="stylesheet" href="./css/theme/moon.css" id="theme" />
    <link rel="stylesheet" href="./css/highlight/zenburn.css" />
    <link rel="stylesheet" href="./css/print/paper.css" type="text/css" media="print" />

  </head>
  <body>
    <div class="reveal">
      <div class="slides"><section  data-markdown><script type="text/template">

## Learning Graphql Part 1: DX

#### John Fay

#### Want to follow along?

`keonik.github.io/learn-graphql`

<aside class="notes"><ol>
<li>Have docker :| 2. Open terminal 3. <code>git clone git@github.com:keonik/learn-graphql.git</code> 4. <code>cd learn-graphql</code> 5. <code>npm install</code> 6. <code>docker-compose up</code></li>
</ol>
</aside></script></section><section  data-markdown><script type="text/template">
## Agenda

-   What is graphql?
-   (Pros) What does it solve?
-   (Cons) What issues does it cause?
-   How will it help Mile Two
-   How it will help your professional development
-   Demo
</script></section><section  data-markdown><script type="text/template">
<section>
<img src="https://raw.githubusercontent.com/keonik/learn-graphql/master/assets/embarassing-author.jpeg" height="400">
    <h2>About me</h2>
    -   5 months of GraphQL exposure
    <br/>
    -   2 month head down learning
    <aside class="notes"><p>Not gonna get some expert level detail but hopefully we all leave here with some new knowledge and an increased interest to use graphql</p>
</section>

<section data-transition="zoom">
    <h2>Learning new tech</h2>
    <img src="https://github.com/keonik/learn-graphql/blob/master/assets/JS_Learning.png?raw=true" height="400"/>
</section></aside></script></section><section  data-markdown><script type="text/template">
<section>
<div style="display: flex; justify-content: center; align-items: center;">
    <h2>What is GraphQL?</h2>
    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/1/17/GraphQL_Logo.svg/1200px-GraphQL_Logo.svg.png" height="100" style="border: none; padding-left: 10px"/>
</div>

<div style=" display: flex; align-items: center; flex-direction: column;">
    <div style="display: flex; align-items: center; ">
        Made by 
        <img src="https://www.facebook.com/images/fb_icon_325x325.png" height=40  style="margin: 0 10px; border: none;"/> 
    </div>
    <div style="display: flex; align-items: center; ">
        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/a/a7/React-icon.svg/1200px-React-icon.svg.png" height=30 style="border: none;"/>React
    </div>
    <div style="display: flex; align-items: center; ">
        <img src="https://engineering.fb.com/wp-content/uploads/2017/04/gni6bqhilcfi2suaaaaaaaafcizpbj0jaaab.jpg" height=30 style="border: none;"/>Relay
    </div>
</div>

<img src="https://miro.medium.com/max/1358/0*CvbyACt1l2JKnbLZ.png" height=100 style="border: none;"/>

<div>
<a href="https://graphql.org/">A query language for your API</a>

</div>

<aside class="notes"><p>Open Source Public release 2015</p>
<p>Multi language support</p>
<p>One liner is...</p>
<p>&quot;Which means you have a complete and understandable description of the data in your API giving the clients the power to ask for what they want and nothing more.&quot;</p>
</section></aside></script></section><section  data-markdown><script type="text/template">
<!-- <img src="https://cdn-media-1.freecodecamp.org/images/kc0xvmMmSaF46CcliELfM8B78hev9NT3QkDG" height="550"/> -->

## Problem

<section>
    GET /genres

```
[
    {
        name: 'Mystery'
    },
    {
        name: 'Romance'
    }
]
```

</section>
<section>

```
[
    {
        name: 'Mystery'
        books: [
            {
                title: 'The lost man',
                author: 'Jane Harper'
            },
            {
                title: 'And then there were none'
                author: 'Agatha Christie'
            }
        ]
    },
]
```

<aside class="notes"><p>book genres</p>
<p>but we also need to get books</p>
<p>typical to fetch them separately but if you can you would like to get it done in one request</p>
<p>so you tweak it to include books</p>
<p>Now anytime you fetch genres you get books with it which on mobile it becomes an issue of overfetching data</p>
</section></aside></script></section><section  data-markdown><script type="text/template">
<section>
<h4>Describe your data</h4>
    <pre>
        <code>
    type Genre {
        name: String
        books: [Book]
    }
        </code>
    </pre>
</section>
<section>
<h4>Ask for what you want</h4>
    <pre>
        <code>
    genre(name: "Mystery"){
        name
        books{
            title
            author
        }
    }
        </code>
    </pre>
</section>
<section>
<h4>Get predictable results</h4>
    <pre>
        <code>
            genre{
                name: 'Mystery'
                books: [
                    {
                        title: 'The lost man',
                        author: 'Jane Harper'
                    },
                    {
                        title: 'And then there were none'
                        author: 'Agatha Christie'
                    }
                ]
            }
        </code>
    </pre>
</section></script></section><section  data-markdown><script type="text/template">
# What does it solve?

-   Client driven instead of server driven

-   Development speed improvements

-   Self documenting

-   Single trip data fetching

<aside class="notes"><p>Instead of having multiple &quot;dumb&quot; endpoints, we have one &quot;smart&quot; endpoint that can take complex queries and turn it into what the client needs</p>
<p>Also Frontend development is a breeze and requires less interactions with backend team to get what they need</p>
<p>Overfetching and underfetching data</p>
</aside></script></section><section  data-markdown><script type="text/template">
## What issues does it cause?

-   Superfluous Database Calls `N+1`

    -   Solution: dataloader

-   Overkill for small applications

    -   Ensure you would benefit from it. More emphasis on frontend development.

-   Time to relearn another thing even though REST works

<aside class="notes"><p>Go into detail on N+1 with genres and books</p>
<ul>
<li>REST works<ul>
<li>scalable</li>
<li>well known</li>
</ul>
</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## What are the people saying?

[State of js 2019](https://2019.stateofjs.com/data-layer/graphql/)

## Who's using it in production?

AirBnB, GitHub, PayPal, Lyft, Starbucks, The New York Times, Twitter, Yelp

<aside class="notes"><p>How it will help you at Mile Two? We&#39;re starting to use this</p>
<p>Mobile</p>
<p>Spinning up quickly and not needing to spend as much time building infrastructure around a clean and simple REST api</p>
</aside></script></section><section  data-markdown><script type="text/template">
## GraphQL fundamentals

### Queries

    GET

    useQuery, useLazyQuery

### Mutations

    PUT, PATCH, POST, DELETE

    useMutation
</script></section><section  data-markdown><script type="text/template">
## Queries

    GET /books

        query {
            books{
                ...
            }
        }

    GET /book/1

        query {
            book(id: 1) {
                ...
            }
        }
</script></section><section  data-markdown><script type="text/template">
## Mutations

    POST book?name=Storyteller

        mutation {
            createBook(
                {
                    name: 'Storyteller'
                }
            ){
                ... what you want to return
            }
        }
</script></section><section  data-markdown><script type="text/template">
<section data-background-image="https://media0.giphy.com/media/pUs87dXYIIrTy/source.gif">
<h3>Now lets show that awesome frontend DX(Developer Experience)</h3>
</section>
</script></section><section  data-markdown><script type="text/template">
### Things you'll need

```

npm install apollo-boost graphql @apollo/react-hooks

```

###### apollo-boost - Zero config apollo client

###### @apollo/react-hooks - Hooks for your queries/mutations

##### graphql - Write queries like so:

```

gql`
    query{
        users(id: 1){
             id
             name
        }
    }
`

```
</script></section><section  data-markdown><script type="text/template">
<section>
    <h2>Some other perks</h2>
</section>

<section>
    <h3>Auto generated type safe responses</h3>
    <img src="https://github.com/keonik/learn-graphql/blob/master/assets/typed_response_data.png?raw=true" width="800">
</section>
</script></section><section  data-markdown><script type="text/template">
## The End of Part 1. Stay tuned for API work!
</script></section><section  data-markdown><script type="text/template">
# Learn Graphql Part 2: API time!

### Things you'll need

`npm install apollo-server pg reflect-metadata typeorm type-graphql`

##### apollo-server

-Server...

##### pg

Database - postgresql

##### reflect-metadata

Makes the decorator @ recognized for classes

##### typeorm

Object relational mapping for NodeJS with latest javascript features

##### type-graphql

Makes it so you can do graphql stuff but typed
</script></section><section  data-markdown><script type="text/template">
### Create a model

```js
export class User {
    id
    firstName
    lastName
}

export class UserTyped {
    id: number
    firstName: string
    lastName: string
}
```

You'll use these across projects so typing has it's benefits
</script></section><section  data-markdown><script type="text/template">
### Create entity

```js
import { Entity } from 'typeorm'

@Entity()
export class User {
    id: number
    firstName: string
    lastName: string
}
```

Tells server that this links to our orm
</script></section><section  data-markdown><script type="text/template">
### Add table columns

```js
import { Entity, Column, PrimaryGeneratedColumn } from 'typeorm'

@Entity()
export class User {
    @PrimaryGeneratedColumn()
    id: number

    @Column()
    firstName: string

    @Column()
    lastName: string
}
```

Project is aware of database column
</script></section><section  data-markdown><script type="text/template">
### Add type-graphql decorators

```js
...
import {ObjectType, ID, Field} from 'type-graphql';

@ObjectType()
@Entity()
export class User {
    @Field(() => ID)
    @PrimaryGeneratedColumn()
    id: number

    @Field(() => String)
    @Column()
    firstName: string

    @Field(() => String)
    @Column()
    lastName: string
}
```

Lets graphql query the User object and their fields
</script></section><section  data-markdown><script type="text/template"></script></section></div>
    </div>

    <script src="./js/reveal.js"></script>

    <script>
      function extend() {
        var target = {};
        for (var i = 0; i < arguments.length; i++) {
          var source = arguments[i];
          for (var key in source) {
            if (source.hasOwnProperty(key)) {
              target[key] = source[key];
            }
          }
        }
        return target;
      }

      // Optional libraries used to extend on reveal.js
      var deps = [
        { src: './plugin/markdown/marked.js', condition: function() { return !!document.querySelector('[data-markdown]'); } },
        { src: './plugin/markdown/markdown.js', condition: function() { return !!document.querySelector('[data-markdown]'); } },
        { src: './plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
        { src: './plugin/zoom-js/zoom.js', async: true },
        { src: './plugin/notes/notes.js', async: true },
        { src: './plugin/math/math.js', async: true }
      ];

      // default options to init reveal.js
      var defaultOptions = {
        controls: true,
        progress: true,
        history: true,
        center: true,
        transition: 'default', // none/fade/slide/convex/concave/zoom
        dependencies: deps
      };

      // options from URL query string
      var queryOptions = Reveal.getQueryHash() || {};

      var options = extend(defaultOptions, {"transition":"slide"}, queryOptions);
    </script>


    <script>
      Reveal.initialize(options);
    </script>
  </body>
</html>
